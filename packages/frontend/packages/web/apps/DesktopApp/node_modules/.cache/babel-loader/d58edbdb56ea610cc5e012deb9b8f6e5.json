{"ast":null,"code":"var _jsxFileName = \"/home/rafael/Documentos/britania/COM-front/packages/web/src/modules/fan/screens/FanFormScreen/FanFormScreen.js\";\nimport React, { useCallback, useMemo, useEffect, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport moment from 'moment';\nimport find from 'lodash/find';\nimport isEmpty from 'lodash/isEmpty';\nimport map from 'lodash/map';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Add from '@material-ui/icons/Add';\nimport PrintIcon from '@material-ui/icons/Print';\nimport { useFormEffect, Scope } from '@britania-crm/forms';\nimport fanSchema, { INITIAL_VALUES } from '@britania-crm/forms/schemas/fan/fan.schema';\nimport I18n, { useT } from '@britania-crm/i18n';\nimport { fan as fanCrmRoutes, linesMaster as lineMasterCrmRoutes } from '@britania-crm/services/apis/crmApi/resources/routes';\nimport useCrmApi from '@britania-crm/services/hooks/useCrmApi';\nimport { FanActions } from '@britania-crm/stores/fan';\nimport { formatBackDateTimeToBackDateFormat } from '@britania-crm/utils/date';\nimport Button from '@britania-crm/web-components/Button';\nimport CustomAccordion from '@britania-crm/web-components/CustomAccordion';\nimport Form from '@britania-crm/web-components/Form';\nimport IconButton from '@britania-crm/web-components/IconButton';\nimport InfoIcon from '@britania-crm/web-components/Icons/infoIcon';\nimport CircularLoader from '@britania-crm/web-components/Loader/CircularLoader';\nimport { useRoutes } from '@britania-crm/web-src/routes/authenticated.routes';\nimport Attachments from '../../containers/Attachments';\nimport BudgetAchievement from '../../containers/BudgetAchievement';\nimport MainData from '../../containers/MainData';\nimport OtherNegotiatedFunds from '../../containers/OtherNegotiatedFunds';\nimport PercentageDescription from '../../containers/Percentages/Percentages';\nimport useStyles from './styles';\n\nconst BuyerListScreen = () => {\n  var _state$params, _state$params2;\n\n  const t = useT();\n  const classes = useStyles();\n  const {\n    routes,\n    currentRoute\n  } = useRoutes();\n  const dispatch = useCallback(useDispatch(), []);\n  const history = useHistory();\n  const {\n    state\n  } = useLocation();\n  const formRef = useRef(null);\n  const [id, setId] = useState('');\n  const [isAdditive, setIsAdditive] = useState(false);\n  const [loader, setLoader] = useState(false);\n  const [lastFan, setLastFan] = useState([]);\n  const [workflowFanId, setWorkflowFanId] = useState(null);\n  const [haveAWorkflow, setHaveAWorkflow] = useState(null);\n  const {\n    data: linesMasterFromApi,\n    loading: loadingLinesMaster\n  } = useCrmApi(lineMasterCrmRoutes.getAll);\n  const {\n    data: fanFromApi,\n    loading\n  } = useCrmApi((state === null || state === void 0 ? void 0 : (_state$params = state.params) === null || _state$params === void 0 ? void 0 : _state$params.id) ? [fanCrmRoutes.getOne.replace(':fanId', state === null || state === void 0 ? void 0 : (_state$params2 = state.params) === null || _state$params2 === void 0 ? void 0 : _state$params2.id), state] : null);\n  const mode = useMemo(() => {\n    var _routes$viewFan, _routes$newFan, _routes$editFan;\n\n    switch (currentRoute.path) {\n      case (_routes$viewFan = routes.viewFan) === null || _routes$viewFan === void 0 ? void 0 : _routes$viewFan.path:\n        return 'view';\n\n      case (_routes$newFan = routes.newFan) === null || _routes$newFan === void 0 ? void 0 : _routes$newFan.path:\n        return 'create';\n\n      case (_routes$editFan = routes.editFan) === null || _routes$editFan === void 0 ? void 0 : _routes$editFan.path:\n        return 'edit';\n\n      default:\n        return 'view';\n    }\n  }, [currentRoute, routes]);\n  const modeView = useMemo(() => mode === 'view', [mode]);\n  const modeEdit = useMemo(() => mode === 'edit', [mode]);\n  const CALCULATION_OPTIONS = useMemo(() => [{\n    id: 'BRUTO/TOTAL DA NF',\n    name: 'Bruto/Total da NF'\n  }, {\n    id: 'BRUTO/TOTAL DA NF - ST',\n    name: 'Bruto/Total da NF - ST'\n  }, {\n    id: 'LIQUIDO - IPI - ST',\n    name: 'Líquido - IPI - ST'\n  }, {\n    id: 'NETNET - TODOS OS IMPOSTOS',\n    name: 'NetNet - todos os impostos'\n  }, {\n    id: 'BRUTO/TOTAL DA NF - IPI',\n    name: 'Bruto/Total da NF - IPI'\n  }], []);\n  const RANGE_OPTIONS = useMemo(() => [{\n    id: 'ANUAL',\n    name: 'Anual'\n  }, {\n    id: 'MENSAL',\n    name: 'Mensal'\n  }, {\n    id: 'QUINZENAL',\n    name: 'Quinzenal'\n  }, {\n    id: 'SEMANAL',\n    name: 'Semanal'\n  }, {\n    id: 'SEMESTRAL',\n    name: 'Semestral'\n  }, {\n    id: 'TITULO A TITULO',\n    name: 'Título a título'\n  }, {\n    id: 'TRIMESTRAL',\n    name: 'Trimestral'\n  }], []);\n  const DESCONT_OPTIONS = useMemo(() => [{\n    id: 'DEPÓSITO/BOLETO',\n    name: 'Depósito/Boleto'\n  }, {\n    id: 'DESCONTO EM DUPLICATA',\n    name: 'Desconto em duplicata'\n  }, {\n    id: 'NO PREÇO',\n    name: 'No preço'\n  }, {\n    id: 'PRODUTOS - PEDIDO BONIFICADO',\n    name: 'Produtos - Pedido bonificado'\n  }, {\n    id: 'APURACAO',\n    name: 'Apuração'\n  }, {\n    id: 'AUTOMATICO',\n    name: 'Automático'\n  }], []);\n  const BASIS_OF_CALCULATION_OPTIONS = useMemo(() => [{\n    id: 'FATURAMENTO',\n    name: 'Faturamento'\n  }, {\n    id: 'FATURAMENTO ENTREGUE',\n    name: 'Faturamento Entregue'\n  }], []);\n  const SLAUGHTER_RETURN_OPTIONS = useMemo(() => [{\n    id: true,\n    name: 'Sim'\n  }, {\n    id: false,\n    name: 'Não'\n  }], []);\n  const onSuccessCalback = useCallback(() => {\n    setLoader(false);\n    history.push(routes.fan.path);\n  }, [history, routes]);\n  const payload = useCallback(values => {\n    var _values$code, _values$matrix, _values$regionalManag, _values$regionalManag2;\n\n    return {\n      company: values.company,\n      parentCompanyCode: (_values$code = values.code) === null || _values$code === void 0 ? void 0 : _values$code.parentCompanyCode,\n      parentCompanyName: (_values$matrix = values.matrix) === null || _values$matrix === void 0 ? void 0 : _values$matrix.parentCompany,\n      responsible: values.responsible.name,\n      regionalManager: (_values$regionalManag = values.regionalManager) === null || _values$regionalManag === void 0 ? void 0 : _values$regionalManag.approverDescription,\n      regionalManagerCode: (_values$regionalManag2 = values.regionalManager) === null || _values$regionalManag2 === void 0 ? void 0 : _values$regionalManag2.approverCode,\n      startDate: moment(values.date.from).toISOString(),\n      endDate: moment(values.date.to).toISOString(),\n      directorship: find(linesMasterFromApi, ({\n        masterLineCode\n      }) => masterLineCode === values.directorship).masterLineCode,\n      directorshipDescription: find(linesMasterFromApi, ({\n        masterLineCode\n      }) => masterLineCode === values.directorship).masterLineDescription,\n      observation: values.observation,\n      lines: values.linesFromBack,\n      families: values.familiesFromBack,\n      linesExceptions: values.linesExceptionsFromBack,\n      familiesExceptions: values.familiesExceptionsFromBack,\n      percentages: values.percentages,\n      negotiatedFunds: values.negotiatedFunds,\n      achivements: values.achivements,\n      attachments: values.attachments,\n      isAdditive: !!isAdditive\n    };\n  }, [isAdditive, linesMasterFromApi]);\n  const handleSubmit = useCallback(values => {\n    if (!id) {\n      dispatch(FanActions.saveFan({ ...payload(values.fan),\n        workflowFanId\n      }, id => {\n        dispatch(FanActions.concludeFan(id));\n        onSuccessCalback();\n      }, setLoader));\n    } else {\n      dispatch(FanActions.updateFan(id, payload(values.fan), dispatch(FanActions.concludeFan(id, onSuccessCalback, setLoader)), setLoader));\n    }\n  }, [dispatch, id, onSuccessCalback, payload, workflowFanId]);\n  const handleSaveSubmit = useCallback(() => {\n    setLoader(true);\n    const values = formRef.current.getData();\n\n    if (!id) {\n      dispatch(FanActions.saveFan({ ...payload(values.fan),\n        workflowFanId\n      }, onSuccessCalback, setLoader));\n    } else {\n      dispatch(FanActions.updateFan(id, payload(values.fan), onSuccessCalback, setLoader));\n    }\n  }, [dispatch, id, onSuccessCalback, payload, workflowFanId]);\n  const handleAddAdditive = useCallback(() => {\n    history.push(routes.newFan.path, {\n      params: {\n        isAdditive: fanFromApi\n      }\n    });\n  }, [fanFromApi, history, routes]);\n  const setValuesForm = useCallback(values => {\n    var _values$fan, _values$fan2, _values$fan3, _values$fan4, _values$fan5, _values$fan6, _values$fan7, _values$fan8, _values$fan9, _values$fan10, _values$fan11, _values$fan12, _values$fan13, _values$fan14, _values$lastFan, _values$lastFan2, _values$lastFan3, _values$lastFan4, _values$lastFan5, _values$lastFan6, _values$lastFan7, _values$lastFan8, _values$lastFan9, _values$lastFan10, _values$lastFan11, _values$lastFan12, _values$lastFan13, _values$lastFan14, _values$lastFan15, _values$lastFan16, _values$lastFan17;\n\n    formRef.current.setData({\n      fan: { ...values.fan,\n        matrix: {\n          parentCompany: values.fan.parentCompanyName,\n          parentCompanyCode: values.fan.parentCompanyCode\n        },\n        code: {\n          parentCompanyCode: values.fan.parentCompanyCode,\n          parentCompany: values.fan.parentCompanyName\n        },\n        responsible: {\n          name: values.fan.responsible\n        },\n        regionalManager: {\n          approverCode: (_values$fan = values.fan) === null || _values$fan === void 0 ? void 0 : _values$fan.regionalManagerCode,\n          approverDescription: (_values$fan2 = values.fan) === null || _values$fan2 === void 0 ? void 0 : _values$fan2.regionalManager\n        },\n        date: {\n          from: formatBackDateTimeToBackDateFormat((_values$fan3 = values.fan) === null || _values$fan3 === void 0 ? void 0 : _values$fan3.startDate),\n          to: formatBackDateTimeToBackDateFormat((_values$fan4 = values.fan) === null || _values$fan4 === void 0 ? void 0 : _values$fan4.endDate)\n        },\n        directorship: (_values$fan5 = values.fan) === null || _values$fan5 === void 0 ? void 0 : _values$fan5.directorship,\n        lines: map((_values$fan6 = values.fan) === null || _values$fan6 === void 0 ? void 0 : _values$fan6.lines, ({\n          code\n        }) => code),\n        linesFromBack: (_values$fan7 = values.fan) === null || _values$fan7 === void 0 ? void 0 : _values$fan7.lines,\n        families: map((_values$fan8 = values.fan) === null || _values$fan8 === void 0 ? void 0 : _values$fan8.families, ({\n          code\n        }) => code),\n        familiesFromBack: (_values$fan9 = values.fan) === null || _values$fan9 === void 0 ? void 0 : _values$fan9.families,\n        linesExceptions: map((_values$fan10 = values.fan) === null || _values$fan10 === void 0 ? void 0 : _values$fan10.linesExceptions, ({\n          code\n        }) => code),\n        familiesExceptions: map((_values$fan11 = values.fan) === null || _values$fan11 === void 0 ? void 0 : _values$fan11.familiesExceptions, ({\n          code\n        }) => code),\n        familiesExceptionsFromBack: (_values$fan12 = values.fan) === null || _values$fan12 === void 0 ? void 0 : _values$fan12.familiesExceptions,\n        linesExceptionsFromBack: (_values$fan13 = values.fan) === null || _values$fan13 === void 0 ? void 0 : _values$fan13.linesExceptions,\n        attachments: (_values$fan14 = values.fan) === null || _values$fan14 === void 0 ? void 0 : _values$fan14.documents\n      },\n      lastFan: { ...(values === null || values === void 0 ? void 0 : values.lastFan),\n        matrix: values === null || values === void 0 ? void 0 : (_values$lastFan = values.lastFan) === null || _values$lastFan === void 0 ? void 0 : _values$lastFan.parentCompanyName,\n        code: values === null || values === void 0 ? void 0 : (_values$lastFan2 = values.lastFan) === null || _values$lastFan2 === void 0 ? void 0 : _values$lastFan2.parentCompanyCode,\n        responsible: {\n          name: values === null || values === void 0 ? void 0 : (_values$lastFan3 = values.lastFan) === null || _values$lastFan3 === void 0 ? void 0 : _values$lastFan3.responsible\n        },\n        regionalManager: {\n          approverCode: values === null || values === void 0 ? void 0 : (_values$lastFan4 = values.lastFan) === null || _values$lastFan4 === void 0 ? void 0 : _values$lastFan4.regionalManagerCode,\n          approverDescription: values === null || values === void 0 ? void 0 : (_values$lastFan5 = values.lastFan) === null || _values$lastFan5 === void 0 ? void 0 : _values$lastFan5.regionalManager\n        },\n        date: {\n          from: formatBackDateTimeToBackDateFormat(values === null || values === void 0 ? void 0 : (_values$lastFan6 = values.lastFan) === null || _values$lastFan6 === void 0 ? void 0 : _values$lastFan6.startDate),\n          to: formatBackDateTimeToBackDateFormat(values === null || values === void 0 ? void 0 : (_values$lastFan7 = values.lastFan) === null || _values$lastFan7 === void 0 ? void 0 : _values$lastFan7.endDate)\n        },\n        directorship: values === null || values === void 0 ? void 0 : (_values$lastFan8 = values.lastFan) === null || _values$lastFan8 === void 0 ? void 0 : _values$lastFan8.directorship,\n        lines: map(values === null || values === void 0 ? void 0 : (_values$lastFan9 = values.lastFan) === null || _values$lastFan9 === void 0 ? void 0 : _values$lastFan9.lines, ({\n          code\n        }) => code),\n        linesFromBack: values === null || values === void 0 ? void 0 : (_values$lastFan10 = values.lastFan) === null || _values$lastFan10 === void 0 ? void 0 : _values$lastFan10.lines,\n        families: map(values === null || values === void 0 ? void 0 : (_values$lastFan11 = values.lastFan) === null || _values$lastFan11 === void 0 ? void 0 : _values$lastFan11.families, ({\n          code\n        }) => code),\n        familiesFromBack: values === null || values === void 0 ? void 0 : (_values$lastFan12 = values.lastFan) === null || _values$lastFan12 === void 0 ? void 0 : _values$lastFan12.families,\n        linesExceptions: map(values === null || values === void 0 ? void 0 : (_values$lastFan13 = values.lastFan) === null || _values$lastFan13 === void 0 ? void 0 : _values$lastFan13.linesExceptions, ({\n          code\n        }) => code),\n        familiesExceptions: map(values === null || values === void 0 ? void 0 : (_values$lastFan14 = values.lastFan) === null || _values$lastFan14 === void 0 ? void 0 : _values$lastFan14.familiesExceptions, ({\n          code\n        }) => code),\n        familiesExceptionsFromBack: values === null || values === void 0 ? void 0 : (_values$lastFan15 = values.lastFan) === null || _values$lastFan15 === void 0 ? void 0 : _values$lastFan15.familiesExceptions,\n        linesExceptionsFromBack: values === null || values === void 0 ? void 0 : (_values$lastFan16 = values.lastFan) === null || _values$lastFan16 === void 0 ? void 0 : _values$lastFan16.linesExceptions,\n        attachments: (_values$lastFan17 = values.lastFan) === null || _values$lastFan17 === void 0 ? void 0 : _values$lastFan17.documents\n      }\n    });\n  }, []);\n  useFormEffect(() => {\n    if (!isEmpty(fanFromApi)) {\n      var _fanFromApi$fan, _fanFromApi$fan2, _fanFromApi$fan3, _fanFromApi$fan4;\n\n      setValuesForm(fanFromApi);\n      setId(fanFromApi === null || fanFromApi === void 0 ? void 0 : (_fanFromApi$fan = fanFromApi.fan) === null || _fanFromApi$fan === void 0 ? void 0 : _fanFromApi$fan.id);\n      setLastFan(fanFromApi === null || fanFromApi === void 0 ? void 0 : fanFromApi.lastFan);\n      setIsAdditive(fanFromApi === null || fanFromApi === void 0 ? void 0 : (_fanFromApi$fan2 = fanFromApi.fan) === null || _fanFromApi$fan2 === void 0 ? void 0 : _fanFromApi$fan2.isAdditive);\n      setWorkflowFanId(fanFromApi === null || fanFromApi === void 0 ? void 0 : (_fanFromApi$fan3 = fanFromApi.fan) === null || _fanFromApi$fan3 === void 0 ? void 0 : _fanFromApi$fan3.workflowFanId);\n      setHaveAWorkflow(fanFromApi === null || fanFromApi === void 0 ? void 0 : (_fanFromApi$fan4 = fanFromApi.fan) === null || _fanFromApi$fan4 === void 0 ? void 0 : _fanFromApi$fan4.workflowPerformedId);\n    }\n  }, [fanFromApi, linesMasterFromApi, setValuesForm]);\n  useEffect(() => {\n    var _state$params3;\n\n    if (!(state === null || state === void 0 ? void 0 : (_state$params3 = state.params) === null || _state$params3 === void 0 ? void 0 : _state$params3.id) && mode !== 'create') history.replace(routes.fan.path);\n  }, [history, mode, routes, state]);\n  useFormEffect(() => {\n    var _state$params4;\n\n    if (!isEmpty(state === null || state === void 0 ? void 0 : (_state$params4 = state.params) === null || _state$params4 === void 0 ? void 0 : _state$params4.isAdditive)) {\n      var _state$params5, _state$params6, _state$params7;\n\n      setValuesForm(state === null || state === void 0 ? void 0 : (_state$params5 = state.params) === null || _state$params5 === void 0 ? void 0 : _state$params5.isAdditive);\n      setId(state === null || state === void 0 ? void 0 : (_state$params6 = state.params) === null || _state$params6 === void 0 ? void 0 : _state$params6.id);\n      setIsAdditive(state === null || state === void 0 ? void 0 : (_state$params7 = state.params) === null || _state$params7 === void 0 ? void 0 : _state$params7.isAdditive);\n    }\n  }, [fanFromApi, setValuesForm, state]);\n  return /*#__PURE__*/React.createElement(Form, {\n    ref: formRef,\n    onSubmit: handleSubmit,\n    schemaConstructor: fanSchema,\n    defaultValues: INITIAL_VALUES,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 5\n    }\n  }, (loading || loadingLinesMaster || loader) && /*#__PURE__*/React.createElement(CircularLoader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 54\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    className: classes.header,\n    sm: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(I18n, {\n    as: Typography,\n    className: classes.title,\n    variant: \"h4\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 11\n    }\n  }, \"current fan\"), isEmpty(lastFan) && /*#__PURE__*/React.createElement(IconButton, {\n    color: \"care\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InfoIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(I18n, {\n    as: Typography,\n    variant: \"body2\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }, \"there is no previous FAN\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    sm: 12,\n    md: 6,\n    className: classes.addAdditive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 9\n    }\n  }, modeEdit && /*#__PURE__*/React.createElement(Button, {\n    className: classes.btnAdditive,\n    disabled: false,\n    variant: \"outlined\",\n    color: \"secondary\",\n    startIcon: /*#__PURE__*/React.createElement(Add, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 27\n      }\n    }),\n    onClick: handleAddAdditive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 13\n    }\n  }, t('add additive'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Scope, {\n    path: \"fan\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('main data'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MainData, {\n    formRef: formRef,\n    isDisabled: modeView,\n    lineMasterOptions: linesMasterFromApi,\n    isEdit: modeEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('percentage description'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PercentageDescription, {\n    isDisabled: modeView,\n    formRef: formRef,\n    slaghterReturnOptions: SLAUGHTER_RETURN_OPTIONS,\n    rangeOptions: RANGE_OPTIONS,\n    calculationOptions: CALCULATION_OPTIONS,\n    basisOfCalculationOptions: BASIS_OF_CALCULATION_OPTIONS,\n    descontOptions: DESCONT_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('other negotiated funds'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(OtherNegotiatedFunds, {\n    isDisabled: modeView,\n    formRef: formRef,\n    slaghterReturnOptions: SLAUGHTER_RETURN_OPTIONS,\n    rangeOptions: RANGE_OPTIONS,\n    calculationOptions: CALCULATION_OPTIONS,\n    basisOfCalculationOptions: BASIS_OF_CALCULATION_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('budget for achievement of goal'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(BudgetAchievement, {\n    isDisabled: modeView,\n    formRef: formRef,\n    slaghterReturnOptions: SLAUGHTER_RETURN_OPTIONS,\n    rangeOptions: RANGE_OPTIONS,\n    calculationOptions: CALCULATION_OPTIONS,\n    basisOfCalculationOptions: BASIS_OF_CALCULATION_OPTIONS,\n    descontOptions: DESCONT_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 15\n    }\n  })), (modeEdit || modeView) && /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('attachments', {\n      howMany: 1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Attachments, {\n    isDisabled: modeView,\n    formRef: formRef,\n    idFan: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: classes.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 11\n    }\n  }, !modeView ? /*#__PURE__*/React.createElement(I18n, {\n    as: Button,\n    className: classes.resetBtn,\n    disabled: false,\n    variant: \"text\",\n    color: \"secondary\",\n    type: \"reset\",\n    onClick: () => formRef.current.reset(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 15\n    }\n  }, \"clean\") : /*#__PURE__*/React.createElement(I18n, {\n    as: Button,\n    className: classes.generateReportBtn,\n    disabled: false,\n    variant: \"outlined\",\n    color: \"secondary\",\n    startIcon: /*#__PURE__*/React.createElement(PrintIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 29\n      }\n    }),\n    onClick: () => console.warn('chama rota para gerar arquivo'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 15\n    }\n  }, \"print out\")), /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"secondary\",\n    disabled: false,\n    onClick: () => history.push(routes.fan.path),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 13\n    }\n  }, !modeView ? t('cancel') : t('turn back')), !modeView && !haveAWorkflow && /*#__PURE__*/React.createElement(I18n, {\n    as: Button,\n    color: \"secondary\",\n    variant: \"contained\",\n    className: classes.btnSave,\n    isLoading: false,\n    onClick: handleSaveSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 15\n    }\n  }, \"save\"), !haveAWorkflow && /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    className: classes.btnConclude,\n    isLoading: false,\n    onClick: () => !modeView ? formRef.current.submit() : history.push(routes.editFan.path, {\n      params: {\n        id\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 15\n    }\n  }, !modeView ? t('finish registration') : t('edit'))))), !isEmpty(lastFan) && /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    className: classes.header,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(I18n, {\n    as: Typography,\n    className: classes.title,\n    variant: \"h4\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 13\n    }\n  }, \"last fan\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Scope, {\n    path: \"lastFan\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('main data'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MainData, {\n    formRef: formRef,\n    isDisabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('percentage description'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(PercentageDescription, {\n    isDisabled: true,\n    formRef: formRef,\n    slaghterReturnOptions: SLAUGHTER_RETURN_OPTIONS,\n    rangeOptions: RANGE_OPTIONS,\n    calculationOptions: CALCULATION_OPTIONS,\n    basisOfCalculationOptions: BASIS_OF_CALCULATION_OPTIONS,\n    descontOptions: DESCONT_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('other negotiated funds'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(OtherNegotiatedFunds, {\n    isDisabled: true,\n    formRef: formRef,\n    slaghterReturnOptions: SLAUGHTER_RETURN_OPTIONS,\n    rangeOptions: RANGE_OPTIONS,\n    calculationOptions: CALCULATION_OPTIONS,\n    basisOfCalculationOptions: BASIS_OF_CALCULATION_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('budget for achievement of goal'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(BudgetAchievement, {\n    isDisabled: true,\n    formRef: formRef,\n    slaghterReturnOptions: SLAUGHTER_RETURN_OPTIONS,\n    rangeOptions: RANGE_OPTIONS,\n    calculationOptions: CALCULATION_OPTIONS,\n    basisOfCalculationOptions: BASIS_OF_CALCULATION_OPTIONS,\n    descontOptions: DESCONT_OPTIONS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CustomAccordion, {\n    header: t('attachments', {\n      howMany: 1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Attachments, {\n    isDisabled: true,\n    formRef: formRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 17\n    }\n  }))))));\n};\n\nexport default BuyerListScreen;","map":{"version":3,"sources":["/home/rafael/Documentos/britania/COM-front/packages/web/src/modules/fan/screens/FanFormScreen/FanFormScreen.js"],"names":["React","useCallback","useMemo","useEffect","useRef","useState","useDispatch","useHistory","useLocation","moment","find","isEmpty","map","Grid","Typography","Add","PrintIcon","useFormEffect","Scope","fanSchema","INITIAL_VALUES","I18n","useT","fan","fanCrmRoutes","linesMaster","lineMasterCrmRoutes","useCrmApi","FanActions","formatBackDateTimeToBackDateFormat","Button","CustomAccordion","Form","IconButton","InfoIcon","CircularLoader","useRoutes","Attachments","BudgetAchievement","MainData","OtherNegotiatedFunds","PercentageDescription","useStyles","BuyerListScreen","t","classes","routes","currentRoute","dispatch","history","state","formRef","id","setId","isAdditive","setIsAdditive","loader","setLoader","lastFan","setLastFan","workflowFanId","setWorkflowFanId","haveAWorkflow","setHaveAWorkflow","data","linesMasterFromApi","loading","loadingLinesMaster","getAll","fanFromApi","params","getOne","replace","mode","path","viewFan","newFan","editFan","modeView","modeEdit","CALCULATION_OPTIONS","name","RANGE_OPTIONS","DESCONT_OPTIONS","BASIS_OF_CALCULATION_OPTIONS","SLAUGHTER_RETURN_OPTIONS","onSuccessCalback","push","payload","values","company","parentCompanyCode","code","parentCompanyName","matrix","parentCompany","responsible","regionalManager","approverDescription","regionalManagerCode","approverCode","startDate","date","from","toISOString","endDate","to","directorship","masterLineCode","directorshipDescription","masterLineDescription","observation","lines","linesFromBack","families","familiesFromBack","linesExceptions","linesExceptionsFromBack","familiesExceptions","familiesExceptionsFromBack","percentages","negotiatedFunds","achivements","attachments","handleSubmit","saveFan","concludeFan","updateFan","handleSaveSubmit","current","getData","handleAddAdditive","setValuesForm","setData","documents","workflowPerformedId","container","header","title","addAdditive","btnAdditive","howMany","buttons","resetBtn","reset","generateReportBtn","console","warn","btnSave","btnConclude","submit"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useMemo,\n  useEffect,\n  useRef,\n  useState\n} from 'react'\nimport { useDispatch } from 'react-redux'\nimport {\n  useHistory,\n  useLocation\n} from 'react-router-dom'\n\nimport moment from 'moment'\n\nimport find from 'lodash/find'\nimport isEmpty from 'lodash/isEmpty'\nimport map from 'lodash/map'\n\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport Add from '@material-ui/icons/Add'\nimport PrintIcon from '@material-ui/icons/Print'\n\nimport {\n  useFormEffect,\n  Scope\n} from '@britania-crm/forms'\nimport fanSchema, { INITIAL_VALUES } from '@britania-crm/forms/schemas/fan/fan.schema'\nimport I18n, { useT } from '@britania-crm/i18n'\nimport {\n  fan as fanCrmRoutes,\n  linesMaster as lineMasterCrmRoutes\n} from '@britania-crm/services/apis/crmApi/resources/routes'\nimport useCrmApi from '@britania-crm/services/hooks/useCrmApi'\nimport { FanActions } from '@britania-crm/stores/fan'\nimport { formatBackDateTimeToBackDateFormat } from '@britania-crm/utils/date'\nimport Button from '@britania-crm/web-components/Button'\nimport CustomAccordion from '@britania-crm/web-components/CustomAccordion'\nimport Form from '@britania-crm/web-components/Form'\nimport IconButton from '@britania-crm/web-components/IconButton'\nimport InfoIcon from '@britania-crm/web-components/Icons/infoIcon'\nimport CircularLoader from '@britania-crm/web-components/Loader/CircularLoader'\nimport { useRoutes } from '@britania-crm/web-src/routes/authenticated.routes'\n\nimport Attachments from '../../containers/Attachments'\nimport BudgetAchievement from '../../containers/BudgetAchievement'\nimport MainData from '../../containers/MainData'\nimport OtherNegotiatedFunds from '../../containers/OtherNegotiatedFunds'\nimport PercentageDescription from '../../containers/Percentages/Percentages'\nimport useStyles from './styles'\n\nconst BuyerListScreen = () => {\n  const t = useT()\n  const classes = useStyles()\n  const { routes, currentRoute } = useRoutes()\n  const dispatch = useCallback(useDispatch(), [])\n  const history = useHistory()\n\n  const { state } = useLocation()\n  const formRef = useRef(null)\n\n  const [id, setId] = useState('')\n  const [isAdditive, setIsAdditive] = useState(false)\n  const [loader, setLoader] = useState(false)\n  const [lastFan, setLastFan] = useState([])\n  const [workflowFanId, setWorkflowFanId] = useState(null)\n  const [haveAWorkflow, setHaveAWorkflow] = useState(null)\n\n  const { data: linesMasterFromApi, loading: loadingLinesMaster } = useCrmApi(lineMasterCrmRoutes.getAll)\n\n  const { data: fanFromApi, loading } = useCrmApi(state?.params?.id ? [fanCrmRoutes.getOne.replace(':fanId', state?.params?.id), state] : null)\n\n  const mode = useMemo(\n    () => {\n      switch (currentRoute.path) {\n        case routes.viewFan?.path: return 'view'\n        case routes.newFan?.path: return 'create'\n        case routes.editFan?.path: return 'edit'\n        default: return 'view'\n      }\n    },\n    [currentRoute, routes]\n  )\n  const modeView = useMemo(() => mode === 'view', [mode])\n  const modeEdit = useMemo(() => mode === 'edit', [mode])\n\n  const CALCULATION_OPTIONS = useMemo(() => [\n    { id: 'BRUTO/TOTAL DA NF', name: 'Bruto/Total da NF' },\n    { id: 'BRUTO/TOTAL DA NF - ST', name: 'Bruto/Total da NF - ST' },\n    { id: 'LIQUIDO - IPI - ST', name: 'Líquido - IPI - ST' },\n    { id: 'NETNET - TODOS OS IMPOSTOS', name: 'NetNet - todos os impostos' },\n    { id: 'BRUTO/TOTAL DA NF - IPI', name: 'Bruto/Total da NF - IPI' }\n  ], [])\n\n  const RANGE_OPTIONS = useMemo(() => [\n    { id: 'ANUAL', name: 'Anual' },\n    { id: 'MENSAL', name: 'Mensal' },\n    { id: 'QUINZENAL', name: 'Quinzenal' },\n    { id: 'SEMANAL', name: 'Semanal' },\n    { id: 'SEMESTRAL', name: 'Semestral' },\n    { id: 'TITULO A TITULO', name: 'Título a título' },\n    { id: 'TRIMESTRAL', name: 'Trimestral' }\n  ], [])\n\n  const DESCONT_OPTIONS = useMemo(() => [\n    { id: 'DEPÓSITO/BOLETO', name: 'Depósito/Boleto' },\n    { id: 'DESCONTO EM DUPLICATA', name: 'Desconto em duplicata' },\n    { id: 'NO PREÇO', name: 'No preço' },\n    { id: 'PRODUTOS - PEDIDO BONIFICADO', name: 'Produtos - Pedido bonificado' },\n    { id: 'APURACAO', name: 'Apuração' },\n    { id: 'AUTOMATICO', name: 'Automático' }\n  ], [])\n\n  const BASIS_OF_CALCULATION_OPTIONS = useMemo(() => [\n    { id: 'FATURAMENTO', name: 'Faturamento' },\n    { id: 'FATURAMENTO ENTREGUE', name: 'Faturamento Entregue' }\n  ], [])\n\n  const SLAUGHTER_RETURN_OPTIONS = useMemo(() => [\n    { id: true, name: 'Sim' },\n    { id: false, name: 'Não' }\n  ], [])\n\n  const onSuccessCalback = useCallback(\n    () => {\n      setLoader(false)\n      history.push(routes.fan.path)\n    },\n    [history, routes]\n  )\n\n  const payload = useCallback(\n    (values) => ({\n      company: values.company,\n      parentCompanyCode: values.code?.parentCompanyCode,\n      parentCompanyName: values.matrix?.parentCompany,\n      responsible: values.responsible.name,\n      regionalManager: values.regionalManager?.approverDescription,\n      regionalManagerCode: values.regionalManager?.approverCode,\n      startDate: moment(values.date.from).toISOString(),\n      endDate: moment(values.date.to).toISOString(),\n      directorship: find(linesMasterFromApi, ({ masterLineCode }) => masterLineCode === values.directorship).masterLineCode,\n      directorshipDescription: find(linesMasterFromApi, ({ masterLineCode }) => masterLineCode === values.directorship).masterLineDescription,\n      observation: values.observation,\n      lines: values.linesFromBack,\n      families: values.familiesFromBack,\n      linesExceptions: values.linesExceptionsFromBack,\n      familiesExceptions: values.familiesExceptionsFromBack,\n      percentages: values.percentages,\n      negotiatedFunds: values.negotiatedFunds,\n      achivements: values.achivements,\n      attachments: values.attachments,\n      isAdditive: !!isAdditive\n    })\n    , [isAdditive, linesMasterFromApi])\n\n  const handleSubmit = useCallback(\n    (values) => {\n      if (!id) {\n        dispatch(\n          FanActions.saveFan(\n            {\n              ...payload(values.fan),\n              workflowFanId\n            },\n            (id) => {\n              dispatch(FanActions.concludeFan(id))\n              onSuccessCalback()\n            },\n            setLoader\n          )\n        )\n      } else {\n        dispatch(FanActions.updateFan(\n          id,\n          payload(values.fan),\n          dispatch(FanActions.concludeFan(id, onSuccessCalback, setLoader)),\n          setLoader\n        ))\n      }\n    },\n    [dispatch, id, onSuccessCalback, payload, workflowFanId]\n  )\n\n  const handleSaveSubmit = useCallback(\n    () => {\n      setLoader(true)\n      const values = formRef.current.getData()\n      if (!id) {\n        dispatch(\n          FanActions.saveFan(\n            {\n              ...payload(values.fan),\n              workflowFanId\n            },\n            onSuccessCalback,\n            setLoader\n          )\n        )\n      } else {\n        dispatch(FanActions.updateFan(id, payload(values.fan), onSuccessCalback, setLoader))\n      }\n    },\n    [dispatch, id, onSuccessCalback, payload, workflowFanId]\n  )\n\n  const handleAddAdditive = useCallback(\n    () => {\n      history.push(routes.newFan.path, { params: { isAdditive: fanFromApi } })\n    },\n    [fanFromApi, history, routes]\n  )\n\n  const setValuesForm = useCallback(\n    (values) => {\n      formRef.current.setData({\n        fan: {\n          ...values.fan,\n          matrix: { parentCompany: values.fan.parentCompanyName, parentCompanyCode: values.fan.parentCompanyCode },\n          code: { parentCompanyCode: values.fan.parentCompanyCode, parentCompany: values.fan.parentCompanyName },\n          responsible: { name: values.fan.responsible },\n          regionalManager: {\n            approverCode: values.fan?.regionalManagerCode,\n            approverDescription: values.fan?.regionalManager\n          },\n          date: {\n            from: formatBackDateTimeToBackDateFormat(values.fan?.startDate),\n            to: formatBackDateTimeToBackDateFormat(values.fan?.endDate)\n          },\n          directorship: values.fan?.directorship,\n          lines: map(values.fan?.lines, ({ code }) => code),\n          linesFromBack: values.fan?.lines,\n          families: map(values.fan?.families, ({ code }) => code),\n          familiesFromBack: values.fan?.families,\n          linesExceptions: map(values.fan?.linesExceptions, ({ code }) => code),\n          familiesExceptions: map(values.fan?.familiesExceptions, ({ code }) => code),\n          familiesExceptionsFromBack: values.fan?.familiesExceptions,\n          linesExceptionsFromBack: values.fan?.linesExceptions,\n          attachments: values.fan?.documents\n        },\n        lastFan: {\n          ...values?.lastFan,\n          matrix: values?.lastFan?.parentCompanyName,\n          code: values?.lastFan?.parentCompanyCode,\n          responsible: { name: values?.lastFan?.responsible },\n          regionalManager: {\n            approverCode: values?.lastFan?.regionalManagerCode,\n            approverDescription: values?.lastFan?.regionalManager\n          },\n          date: {\n            from: formatBackDateTimeToBackDateFormat(values?.lastFan?.startDate),\n            to: formatBackDateTimeToBackDateFormat(values?.lastFan?.endDate)\n          },\n          directorship: values?.lastFan?.directorship,\n          lines: map(values?.lastFan?.lines, ({ code }) => code),\n          linesFromBack: values?.lastFan?.lines,\n          families: map(values?.lastFan?.families, ({ code }) => code),\n          familiesFromBack: values?.lastFan?.families,\n          linesExceptions: map(values?.lastFan?.linesExceptions, ({ code }) => code),\n          familiesExceptions: map(values?.lastFan?.familiesExceptions, ({ code }) => code),\n          familiesExceptionsFromBack: values?.lastFan?.familiesExceptions,\n          linesExceptionsFromBack: values?.lastFan?.linesExceptions,\n          attachments: values.lastFan?.documents\n        }\n      })\n    },\n    []\n  )\n\n  useFormEffect(\n    () => {\n      if (!isEmpty(fanFromApi)) {\n        setValuesForm(fanFromApi)\n        setId(fanFromApi?.fan?.id)\n        setLastFan(fanFromApi?.lastFan)\n        setIsAdditive(fanFromApi?.fan?.isAdditive)\n        setWorkflowFanId(fanFromApi?.fan?.workflowFanId)\n        setHaveAWorkflow(fanFromApi?.fan?.workflowPerformedId)\n      }\n    }\n    , [fanFromApi, linesMasterFromApi, setValuesForm]\n  )\n\n  useEffect(() => {\n    if (!state?.params?.id && mode !== 'create') history.replace(routes.fan.path)\n  },\n  [history, mode, routes, state]\n  )\n\n  useFormEffect(\n    () => {\n      if (!isEmpty(state?.params?.isAdditive)) {\n        setValuesForm(state?.params?.isAdditive)\n        setId(state?.params?.id)\n        setIsAdditive(state?.params?.isAdditive)\n      }\n    }\n    , [fanFromApi, setValuesForm, state]\n  )\n\n  return (\n    <Form\n      ref={ formRef }\n      onSubmit={ handleSubmit }\n      schemaConstructor={ fanSchema }\n      defaultValues={ INITIAL_VALUES }\n    >\n      { (loading || loadingLinesMaster || loader) && <CircularLoader/> }\n      <Grid container spacing={ 2 } className={ classes.container } >\n        <Grid item className={ classes.header } sm={ 12 } md={ 6 }>\n          <I18n as={ Typography } className={ classes.title } variant=\"h4\" gutterBottom >\n          current fan\n          </I18n>\n          {isEmpty(lastFan) && (\n            <IconButton color=\"care\" >\n              <InfoIcon />\n              <I18n as={ Typography } variant=\"body2\" gutterBottom >\n             there is no previous FAN\n              </I18n>\n            </IconButton>\n          )}\n\n        </Grid>\n        <Grid item sm={ 12 } md={ 6 } className={ classes.addAdditive }>\n          { modeEdit && (\n            <Button\n              className={ classes.btnAdditive }\n              disabled={ false }\n              variant=\"outlined\"\n              color=\"secondary\"\n              startIcon={ <Add /> }\n              onClick={ handleAddAdditive }\n            >\n              {t('add additive')}\n            </Button>\n          )}\n        </Grid>\n        <Grid item xs={ 12 }>\n          <Scope path=\"fan\">\n            <CustomAccordion header={ t('main data') }>\n              <MainData\n                formRef={ formRef }\n                isDisabled={ modeView }\n                lineMasterOptions={ linesMasterFromApi }\n                isEdit={ modeEdit }\n              />\n            </CustomAccordion>\n            <CustomAccordion header={ t('percentage description') }>\n              <PercentageDescription\n                isDisabled={ modeView }\n                formRef={ formRef }\n                slaghterReturnOptions={ SLAUGHTER_RETURN_OPTIONS }\n                rangeOptions={ RANGE_OPTIONS }\n                calculationOptions={ CALCULATION_OPTIONS }\n                basisOfCalculationOptions={ BASIS_OF_CALCULATION_OPTIONS }\n                descontOptions={ DESCONT_OPTIONS }\n              />\n            </CustomAccordion>\n            <CustomAccordion header={ t('other negotiated funds') }>\n              <OtherNegotiatedFunds\n                isDisabled={ modeView }\n                formRef={ formRef }\n                slaghterReturnOptions={ SLAUGHTER_RETURN_OPTIONS }\n                rangeOptions={ RANGE_OPTIONS }\n                calculationOptions={ CALCULATION_OPTIONS }\n                basisOfCalculationOptions={ BASIS_OF_CALCULATION_OPTIONS }\n              />\n            </CustomAccordion>\n            <CustomAccordion header={ t('budget for achievement of goal') }>\n              <BudgetAchievement\n                isDisabled={ modeView }\n                formRef={ formRef }\n                slaghterReturnOptions={ SLAUGHTER_RETURN_OPTIONS }\n                rangeOptions={ RANGE_OPTIONS }\n                calculationOptions={ CALCULATION_OPTIONS }\n                basisOfCalculationOptions={ BASIS_OF_CALCULATION_OPTIONS }\n                descontOptions={ DESCONT_OPTIONS }\n              />\n            </CustomAccordion>\n            { (modeEdit || modeView) && (\n              <CustomAccordion header={ t('attachments', { howMany: 1 }) }>\n                <Attachments\n                  isDisabled={ modeView }\n                  formRef={ formRef }\n                  idFan={ id }\n                />\n              </CustomAccordion>)}\n          </Scope>\n        </Grid>\n        <Grid item xs={ 12 } className={ classes.buttons }>\n          <Grid>\n            {!modeView ? (\n              <I18n\n                as={ Button }\n                className={ classes.resetBtn }\n                disabled={ false }\n                variant=\"text\"\n                color=\"secondary\"\n                type=\"reset\"\n                onClick={ () => formRef.current.reset() }\n              >\n                clean\n              </I18n>\n            ) : (\n              <I18n\n                as={ Button }\n                className={ classes.generateReportBtn }\n                disabled={ false }\n                variant=\"outlined\"\n                color=\"secondary\"\n                startIcon={ <PrintIcon /> }\n                onClick={ () => console.warn('chama rota para gerar arquivo') }\n              >\n                print out\n              </I18n>\n            )}\n          </Grid>\n          <Grid>\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              disabled= { false }\n              onClick={ () => history.push(routes.fan.path) }\n            >\n              { !modeView ? t('cancel') : t('turn back') }\n            </Button>\n            {!modeView && !haveAWorkflow && (\n              <I18n as={ Button }\n                color=\"secondary\"\n                variant=\"contained\"\n                className={ classes.btnSave }\n                isLoading={ false }\n                onClick={ handleSaveSubmit }\n              >\n              save\n              </I18n>\n            )\n            }\n            {!haveAWorkflow && (\n              <Button\n                color=\"secondary\"\n                variant=\"contained\"\n                className={ classes.btnConclude }\n                isLoading={ false }\n                onClick={ () => !modeView ? formRef.current.submit() : history.push(routes.editFan.path, { params: { id } }) }\n              >\n                { !modeView ? t('finish registration') : t('edit') }\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n      </Grid>\n      {/* INICIO DO FROM DO ULTIMO FAN */}\n      { !isEmpty(lastFan) && (\n        <Grid container spacing={ 2 } className={ classes.container } >\n          <Grid item className={ classes.header } sm={ 12 }>\n            <I18n as={ Typography } className={ classes.title } variant=\"h4\" gutterBottom >\n         last fan\n            </I18n>\n          </Grid>\n          <Grid item xs={ 12 }>\n            <Scope path=\"lastFan\">\n              <CustomAccordion header={ t('main data') }>\n                <MainData\n                  formRef={ formRef }\n                  isDisabled\n                />\n              </CustomAccordion>\n              <CustomAccordion header={ t('percentage description') }>\n                <PercentageDescription\n                  isDisabled\n                  formRef={ formRef }\n                  slaghterReturnOptions={ SLAUGHTER_RETURN_OPTIONS }\n                  rangeOptions={ RANGE_OPTIONS }\n                  calculationOptions={ CALCULATION_OPTIONS }\n                  basisOfCalculationOptions={ BASIS_OF_CALCULATION_OPTIONS }\n                  descontOptions={ DESCONT_OPTIONS }\n                />\n              </CustomAccordion>\n              <CustomAccordion header={ t('other negotiated funds') }>\n                <OtherNegotiatedFunds\n                  isDisabled\n                  formRef={ formRef }\n                  slaghterReturnOptions={ SLAUGHTER_RETURN_OPTIONS }\n                  rangeOptions={ RANGE_OPTIONS }\n                  calculationOptions={ CALCULATION_OPTIONS }\n                  basisOfCalculationOptions={ BASIS_OF_CALCULATION_OPTIONS }\n                />\n              </CustomAccordion>\n              <CustomAccordion header={ t('budget for achievement of goal') }>\n                <BudgetAchievement\n                  isDisabled\n                  formRef={ formRef }\n                  slaghterReturnOptions={ SLAUGHTER_RETURN_OPTIONS }\n                  rangeOptions={ RANGE_OPTIONS }\n                  calculationOptions={ CALCULATION_OPTIONS }\n                  basisOfCalculationOptions={ BASIS_OF_CALCULATION_OPTIONS }\n                  descontOptions={ DESCONT_OPTIONS }\n                />\n              </CustomAccordion>\n              <CustomAccordion header={ t('attachments', { howMany: 1 }) }>\n                <Attachments\n                  isDisabled\n                  formRef={ formRef }\n                />\n              </CustomAccordion>\n            </Scope>\n          </Grid>\n        </Grid>\n      )}\n    </Form>\n  )\n}\n\nexport default BuyerListScreen\n"]},"metadata":{},"sourceType":"module"}