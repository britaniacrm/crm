{"ast":null,"code":"var _jsxFileName = \"/home/rafael/Documentos/britania/COM-front/packages/web/src/modules/customers/containers/BankReferencesTable/BankReferencesTable.js\";\nimport React, { useMemo, useCallback, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport filter from 'lodash/filter';\nimport map from 'lodash/map';\nimport { useDialog } from '@britania-crm/dialog';\nimport { useT } from '@britania-crm/i18n';\nimport { formatPhone } from '@britania-crm/utils/formatters';\nimport DataTable from '@britania-crm/web-components/DataTable';\nimport InputHidden from '@britania-crm/web-components/InputHidden';\nimport ConfirmModal from '@britania-crm/web-components/Modal/ConfirmModal';\nimport NewBankReferenceModal from '@britania-crm/web-src/modules/customers/modals/NewBankReferenceModal';\n\nconst BankReferencesTable = ({\n  disabled,\n  formRef\n}) => {\n  const t = useT();\n  const {\n    createDialog\n  } = useDialog();\n  const [bankReferences, setBankReferences] = useState([]);\n  const columns = useMemo(() => [{\n    title: t('bank'),\n    field: 'name'\n  }, {\n    title: t('agency', {\n      howMany: 1\n    }),\n    field: 'agency'\n  }, {\n    title: t('account', {\n      howMany: 1\n    }),\n    field: 'account'\n  }, {\n    title: t('phone', {\n      howMany: 1\n    }),\n    field: 'phone',\n    render: row => formatPhone(row.phone) || '-'\n  }], [t]);\n  const onAddClick = useCallback(() => createDialog({\n    id: 'modal-add-new-bank-reference',\n    Component: NewBankReferenceModal,\n    props: {\n      onSubmit(bankReference) {\n        formRef.current.setFieldValue('additionalInformation.bankReferences', old => [...old, bankReference]);\n      }\n\n    }\n  }), [createDialog, formRef]);\n  const onEditClick = useCallback((_, row) => createDialog({\n    id: 'modal-edit-bank-reference',\n    Component: NewBankReferenceModal,\n    props: {\n      bankReference: row,\n\n      onSubmit(bankReference) {\n        formRef.current.setFieldValue('additionalInformation.bankReferences', old => map(old, (item, index) => index === row.tableData.id ? {\n          id: row.id,\n          ...bankReference\n        } : item));\n      }\n\n    }\n  }), [createDialog, formRef]);\n  const onDeleteClick = useCallback((_, row) => createDialog({\n    id: 'modal-delete-bank-reference',\n    Component: ConfirmModal,\n    props: {\n      onConfirm() {\n        formRef.current.setFieldValue('additionalInformation.bankReferences', old => filter(old, (item, index) => index !== row.tableData.id));\n      }\n\n    }\n  }), [createDialog, formRef]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DataTable, {\n    options: {\n      search: false\n    },\n    data: bankReferences,\n    columns: columns,\n    title: t('bank reference', {\n      howMany: 2\n    }),\n    titleProps: {\n      variant: 'h6'\n    },\n    addTitle: t('add new {this}', {\n      this: t('bank reference', {\n        howMany: 1\n      }),\n      gender: 'female'\n    }),\n    minimalistToolbar: true,\n    onAddClick: !disabled && onAddClick,\n    onEditClick: !disabled && onEditClick,\n    onDeleteClick: !disabled && onDeleteClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(InputHidden, {\n    name: \"bankReferences\",\n    showError: true,\n    onValueChange: setBankReferences,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }));\n};\n\nBankReferencesTable.propTypes = {\n  formRef: PropTypes.any.isRequired,\n  disabled: PropTypes.bool.isRequired\n};\nexport default BankReferencesTable;","map":{"version":3,"sources":["/home/rafael/Documentos/britania/COM-front/packages/web/src/modules/customers/containers/BankReferencesTable/BankReferencesTable.js"],"names":["React","useMemo","useCallback","useState","PropTypes","filter","map","useDialog","useT","formatPhone","DataTable","InputHidden","ConfirmModal","NewBankReferenceModal","BankReferencesTable","disabled","formRef","t","createDialog","bankReferences","setBankReferences","columns","title","field","howMany","render","row","phone","onAddClick","id","Component","props","onSubmit","bankReference","current","setFieldValue","old","onEditClick","_","item","index","tableData","onDeleteClick","onConfirm","search","variant","this","gender","propTypes","any","isRequired","bool"],"mappings":"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","sourcesContent":["import React, {\n  useMemo,\n  useCallback,\n  useState\n} from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport filter from 'lodash/filter'\nimport map from 'lodash/map'\n\nimport { useDialog } from '@britania-crm/dialog'\nimport { useT } from '@britania-crm/i18n'\nimport { formatPhone } from '@britania-crm/utils/formatters'\nimport DataTable from '@britania-crm/web-components/DataTable'\nimport InputHidden from '@britania-crm/web-components/InputHidden'\nimport ConfirmModal from '@britania-crm/web-components/Modal/ConfirmModal'\nimport NewBankReferenceModal from '@britania-crm/web-src/modules/customers/modals/NewBankReferenceModal'\n\nconst BankReferencesTable = ({ disabled, formRef }) => {\n  const t = useT()\n  const { createDialog } = useDialog()\n\n  const [bankReferences, setBankReferences] = useState([])\n\n  const columns = useMemo(\n    () => [\n      {\n        title: t('bank'),\n        field: 'name'\n      },\n      {\n        title: t('agency', { howMany: 1 }),\n        field: 'agency'\n      },\n      {\n        title: t('account', { howMany: 1 }),\n        field: 'account'\n      },\n      {\n        title: t('phone', { howMany: 1 }),\n        field: 'phone',\n        render: (row) => formatPhone(row.phone) || '-'\n      }\n    ],\n    [t]\n  )\n\n  const onAddClick = useCallback(\n    () => createDialog({\n      id: 'modal-add-new-bank-reference',\n      Component: NewBankReferenceModal,\n      props: {\n        onSubmit (bankReference) {\n          formRef.current.setFieldValue('additionalInformation.bankReferences', (old) => [...old, bankReference])\n        }\n      }\n    }),\n    [createDialog, formRef]\n  )\n\n  const onEditClick = useCallback(\n    (_, row) => createDialog({\n      id: 'modal-edit-bank-reference',\n      Component: NewBankReferenceModal,\n      props: {\n        bankReference: row,\n        onSubmit (bankReference) {\n          formRef.current.setFieldValue(\n            'additionalInformation.bankReferences',\n            (old) => map(old, (item, index) => index === row.tableData.id ? { id: row.id, ...bankReference } : item)\n          )\n        }\n      }\n    }),\n    [createDialog, formRef]\n  )\n\n  const onDeleteClick = useCallback(\n    (_, row) => createDialog({\n      id: 'modal-delete-bank-reference',\n      Component: ConfirmModal,\n      props: {\n        onConfirm () {\n          formRef.current.setFieldValue(\n            'additionalInformation.bankReferences',\n            (old) => filter(old, (item, index) => index !== row.tableData.id)\n          )\n        }\n      }\n    }),\n    [createDialog, formRef]\n  )\n\n  return (\n    <>\n      <DataTable\n        options={ { search: false } }\n        data={ bankReferences }\n        columns={ columns }\n        title={ t('bank reference', { howMany: 2 }) }\n        titleProps={ { variant: 'h6' } }\n        addTitle={ t('add new {this}', {\n          this: t('bank reference', { howMany: 1 }),\n          gender: 'female'\n        }) }\n        minimalistToolbar\n        onAddClick={ !disabled && onAddClick }\n        onEditClick={ !disabled && onEditClick }\n        onDeleteClick={ !disabled && onDeleteClick }\n      />\n      <InputHidden\n        name=\"bankReferences\"\n        showError\n        onValueChange={ setBankReferences }\n      />\n    </>\n  )\n}\n\nBankReferencesTable.propTypes = {\n  formRef: PropTypes.any.isRequired,\n  disabled: PropTypes.bool.isRequired\n}\n\nexport default BankReferencesTable\n"]},"metadata":{},"sourceType":"module"}