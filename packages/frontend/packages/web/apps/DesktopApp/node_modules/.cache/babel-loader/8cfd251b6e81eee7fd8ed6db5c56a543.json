{"ast":null,"code":"var _jsxFileName = \"/home/rafael/Documentos/britania/COM-front/packages/web/components/InputDateRange/InputDateRangeStyled.js\";\nimport React, { useMemo, useState, useEffect, memo } from 'react';\nimport moment from 'moment/moment';\nimport PropTypes from 'prop-types';\nimport { isObject } from 'lodash';\nimport isEqual from 'lodash/isEqual';\nimport Grid from '@material-ui/core/Grid';\nimport { useT } from '@britania-crm/i18n';\nimport { dateBackFormat } from '@britania-crm/utils/date';\nimport { areEqual } from '@britania-crm/utils/memo';\nimport InputDate from '@britania-crm/web-components/InputDate';\n\nconst InputDateRangeStyled = props => {\n  const {\n    value,\n    onChange,\n    min,\n    max,\n    labelFrom,\n    labelTo,\n    disabled,\n    required,\n    error\n  } = props;\n  const t = useT();\n  const [dateFrom, setDateFrom] = useState(value.from);\n  const [dateTo, setDateTo] = useState(value.to);\n  const generalError = useMemo(() => isObject(error) ? undefined : error, [error]);\n  const inputsProps = useMemo(() => ({\n    min,\n    max,\n    disabled,\n    required\n  }), [disabled, max, min, required]);\n  const minDateTo = useMemo(() => {\n    if (inputsProps.min && dateFrom) {\n      const fromMoment = moment(dateFrom, dateBackFormat, true);\n      const minMoment = moment(inputsProps.min, dateBackFormat, true);\n\n      if (fromMoment.isValid() && fromMoment.isAfter(minMoment)) {\n        return dateFrom;\n      }\n    }\n\n    return inputsProps.min;\n  }, [dateFrom, inputsProps.min]);\n  useEffect(() => {\n    if (!isEqual(value, {\n      from: dateFrom,\n      to: dateTo\n    })) {\n      setDateFrom(value.from);\n      setDateTo(value.to);\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [value]);\n  useEffect(() => {\n    const from = dateFrom;\n    let to = dateTo;\n\n    if (!isEqual(value, {\n      from,\n      to\n    })) {\n      if (from && to) {\n        const fromMoment = moment(from, dateBackFormat, true);\n        const toMoment = moment(to, dateBackFormat, true);\n\n        if (toMoment.isValid() && fromMoment.isValid() && fromMoment.isAfter(toMoment)) {\n          to = '';\n        }\n      }\n\n      onChange({\n        from,\n        to\n      });\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [dateFrom, dateTo]);\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InputDate, Object.assign({\n    detached: true,\n    name: \"from\",\n    label: labelFrom || t('start date'),\n    value: dateFrom,\n    onChange: setDateFrom,\n    error: !dateFrom && generalError || (error === null || error === void 0 ? void 0 : error.from)\n  }, inputsProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(InputDate, Object.assign({\n    detached: true,\n    name: \"to\",\n    label: labelTo || t('end date'),\n    value: dateTo,\n    onChange: setDateTo,\n    error: !dateTo && generalError || (error === null || error === void 0 ? void 0 : error.to)\n  }, inputsProps, {\n    min: minDateTo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }))));\n};\n\nInputDateRangeStyled.propTypes = {\n  value: PropTypes.shape({\n    from: PropTypes.string,\n    to: PropTypes.string\n  }),\n  onChange: PropTypes.func,\n  disabled: PropTypes.bool,\n  required: PropTypes.bool,\n  minWidth: PropTypes.number,\n  defaultValue: PropTypes.shape({\n    to: PropTypes.string,\n    from: PropTypes.string\n  }),\n  min: PropTypes.string,\n  max: PropTypes.string,\n  styles: PropTypes.object,\n  labelFrom: PropTypes.string,\n  labelTo: PropTypes.string,\n  error: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n};\nInputDateRangeStyled.defaultProps = {\n  value: {\n    from: '',\n    to: ''\n  },\n  defaultValue: {\n    from: '',\n    to: ''\n  },\n\n  onChange() {},\n\n  disabled: false,\n  required: false,\n  minWidth: 190,\n  min: undefined,\n  max: undefined,\n  styles: {},\n  labelFrom: null,\n  labelTo: null,\n  error: null\n};\nexport default memo(InputDateRangeStyled, areEqual);","map":{"version":3,"sources":["/home/rafael/Documentos/britania/COM-front/packages/web/components/InputDateRange/InputDateRangeStyled.js"],"names":["React","useMemo","useState","useEffect","memo","moment","PropTypes","isObject","isEqual","Grid","useT","dateBackFormat","areEqual","InputDate","InputDateRangeStyled","props","value","onChange","min","max","labelFrom","labelTo","disabled","required","error","t","dateFrom","setDateFrom","from","dateTo","setDateTo","to","generalError","undefined","inputsProps","minDateTo","fromMoment","minMoment","isValid","isAfter","toMoment","propTypes","shape","string","func","bool","minWidth","number","defaultValue","styles","object","oneOfType","defaultProps"],"mappings":"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","sourcesContent":["import React, {\n  useMemo,\n  useState,\n  useEffect,\n  memo\n} from 'react'\n\nimport moment from 'moment/moment'\nimport PropTypes from 'prop-types'\n\nimport { isObject } from 'lodash'\nimport isEqual from 'lodash/isEqual'\n\nimport Grid from '@material-ui/core/Grid'\n\nimport { useT } from '@britania-crm/i18n'\nimport { dateBackFormat } from '@britania-crm/utils/date'\nimport { areEqual } from '@britania-crm/utils/memo'\nimport InputDate from '@britania-crm/web-components/InputDate'\n\nconst InputDateRangeStyled = (props) => {\n  const {\n    value,\n    onChange,\n    min,\n    max,\n    labelFrom,\n    labelTo,\n    disabled,\n    required,\n    error\n  } = props\n\n  const t = useT()\n\n  const [dateFrom, setDateFrom] = useState(value.from)\n  const [dateTo, setDateTo] = useState(value.to)\n\n  const generalError = useMemo(\n    () => isObject(error) ? undefined : error,\n    [error]\n  )\n\n  const inputsProps = useMemo(\n    () => ({\n      min,\n      max,\n      disabled,\n      required\n    }),\n    [disabled, max, min, required]\n  )\n\n  const minDateTo = useMemo(() => {\n    if (inputsProps.min && dateFrom) {\n      const fromMoment = moment(dateFrom, dateBackFormat, true)\n      const minMoment = moment(inputsProps.min, dateBackFormat, true)\n      if (fromMoment.isValid() && fromMoment.isAfter(minMoment)) {\n        return dateFrom\n      }\n    }\n    return inputsProps.min\n  }, [dateFrom, inputsProps.min])\n\n  useEffect(\n    () => {\n      if (!isEqual(value, { from: dateFrom, to: dateTo })) {\n        setDateFrom(value.from)\n        setDateTo(value.to)\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [value]\n  )\n\n  useEffect(\n    () => {\n      const from = dateFrom\n      let to = dateTo\n      if (!isEqual(value, { from, to })) {\n        if (from && to) {\n          const fromMoment = moment(from, dateBackFormat, true)\n          const toMoment = moment(to, dateBackFormat, true)\n          if (\n            toMoment.isValid() &&\n            fromMoment.isValid() &&\n            fromMoment.isAfter(toMoment)\n          ) {\n            to = ''\n          }\n        }\n        onChange({ from, to })\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [dateFrom, dateTo]\n  )\n  return (\n    <Grid container spacing={ 1 }>\n      <Grid item xs={ 6 }>\n        <InputDate\n          detached\n          name=\"from\"\n          label={ labelFrom || t('start date') }\n          value={ dateFrom }\n          onChange={ setDateFrom }\n          error={ (!dateFrom && generalError) || error?.from }\n          { ...inputsProps }\n        />\n      </Grid>\n      <Grid item xs={ 6 }>\n        <InputDate\n          detached\n          name=\"to\"\n          label={ labelTo || t('end date') }\n          value={ dateTo }\n          onChange={ setDateTo }\n          error={ (!dateTo && generalError) || error?.to }\n          { ...inputsProps }\n          min={ minDateTo }\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nInputDateRangeStyled.propTypes = {\n  value: PropTypes.shape({\n    from: PropTypes.string,\n    to: PropTypes.string\n  }),\n  onChange: PropTypes.func,\n  disabled: PropTypes.bool,\n  required: PropTypes.bool,\n  minWidth: PropTypes.number,\n  defaultValue: PropTypes.shape({\n    to: PropTypes.string,\n    from: PropTypes.string\n  }),\n  min: PropTypes.string,\n  max: PropTypes.string,\n  styles: PropTypes.object,\n  labelFrom: PropTypes.string,\n  labelTo: PropTypes.string,\n  error: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object\n  ])\n}\n\nInputDateRangeStyled.defaultProps = {\n  value: {\n    from: '',\n    to: ''\n  },\n  defaultValue: {\n    from: '',\n    to: ''\n  },\n  onChange () {},\n  disabled: false,\n  required: false,\n  minWidth: 190,\n  min: undefined,\n  max: undefined,\n  styles: {},\n  labelFrom: null,\n  labelTo: null,\n  error: null\n}\n\nexport default memo(InputDateRangeStyled, areEqual)\n"]},"metadata":{},"sourceType":"module"}