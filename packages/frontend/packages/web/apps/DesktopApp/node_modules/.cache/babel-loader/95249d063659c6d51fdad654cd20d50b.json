{"ast":null,"code":"var _jsxFileName = \"/home/rafael/Documentos/britania/COM-front/packages/web/src/modules/representative/containers/Documentation/Documentation.js\";\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport filter from 'lodash/filter';\nimport map from 'lodash/map';\nimport Grid from '@material-ui/core/Grid';\nimport { useDialog } from '@britania-crm/dialog';\nimport { useT } from '@britania-crm/i18n';\nimport { RepresentativeActions } from '@britania-crm/stores/representative';\nimport { formatBackDateToFriendlyFormat } from '@britania-crm/utils/date';\nimport DataTable from '@britania-crm/web-components/DataTable';\nimport InputHidden from '@britania-crm/web-components/InputHidden';\nimport { CircularLoader } from '@britania-crm/web-components/Loader';\nimport formFileModal from '../../modals/formFileModal/FormFileModal';\nimport useStyles from '../styles';\n\nconst Documentation = ({\n  disabled,\n  formRef\n}) => {\n  const t = useT();\n  const classes = useStyles();\n  const {\n    createDialog\n  } = useDialog();\n  const dispatch = useCallback(useDispatch(), []);\n  const [documents, setDocuments] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const columns = useMemo(() => [{\n    title: t('name', {\n      howMany: 1\n    }),\n    field: 'name',\n    sorting: false\n  }, {\n    title: t('observation', {\n      howMany: 1\n    }),\n    field: 'observation',\n    sorting: false\n  }, {\n    title: t('date'),\n    field: 'created_at',\n    sorting: false,\n    render: row => {\n      var _row$file;\n\n      return formatBackDateToFriendlyFormat(((_row$file = row.file) === null || _row$file === void 0 ? void 0 : _row$file.created_at) || row.created_at);\n    }\n  }], [t]);\n  const onAddClick = useCallback(() => {\n    createDialog({\n      id: 'createFileModal',\n      Component: formFileModal,\n      props: {\n        mode: 'create',\n\n        onSave(values) {\n          formRef.current.setFieldValue('documents', old => [...old, values]);\n        }\n\n      }\n    });\n  }, [createDialog, formRef]);\n  const onEditClick = useCallback((event, row) => {\n    createDialog({\n      id: 'editFileModal',\n      Component: formFileModal,\n      props: {\n        row,\n        mode: 'edit',\n\n        onEdit(values) {\n          formRef.current.setFieldValue('documents', old => map(old, item => {\n            var _item$tableData, _row$tableData;\n\n            if (((_item$tableData = item.tableData) === null || _item$tableData === void 0 ? void 0 : _item$tableData.id) === (row === null || row === void 0 ? void 0 : (_row$tableData = row.tableData) === null || _row$tableData === void 0 ? void 0 : _row$tableData.id)) {\n              return { ...values,\n                id: row.id\n              };\n            }\n\n            return item;\n          }));\n        }\n\n      }\n    });\n  }, [createDialog, formRef]);\n  const onViewFileClick = useCallback((event, row) => {\n    createDialog({\n      id: 'viewFileModal',\n      Component: formFileModal,\n      props: {\n        row,\n        mode: 'view'\n      }\n    });\n  }, [createDialog]);\n  const onDeleteClick = useCallback((event, row) => {\n    dispatch(RepresentativeActions.deleteFileRepresentative(row.id, () => formRef.current.setFieldValue('documents', old => filter(old, ({\n      tableData\n    }) => {\n      var _row$tableData2;\n\n      return (tableData === null || tableData === void 0 ? void 0 : tableData.id) !== (row === null || row === void 0 ? void 0 : (_row$tableData2 = row.tableData) === null || _row$tableData2 === void 0 ? void 0 : _row$tableData2.id);\n    }))));\n  }, [dispatch, formRef]);\n  const onDownloadClick = useCallback((event, row) => {\n    var _row$file2, _row$file3;\n\n    setLoading(true);\n    dispatch(RepresentativeActions.downloadFileRepresentative(row === null || row === void 0 ? void 0 : (_row$file2 = row.file) === null || _row$file2 === void 0 ? void 0 : _row$file2.path, row === null || row === void 0 ? void 0 : (_row$file3 = row.file) === null || _row$file3 === void 0 ? void 0 : _row$file3.filename, setLoading));\n  }, [dispatch]);\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    className: classes.containerMain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, loading && /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 52\n    }\n  })), /*#__PURE__*/React.createElement(DataTable, {\n    data: documents,\n    columns: columns,\n    addTitle: t('add new {this}', {\n      gender: 'male',\n      this: t('archive', {\n        howMany: 1\n      })\n    }),\n    onAddClick: !disabled && onAddClick,\n    onEditClick: !disabled && onEditClick,\n    onDeleteClick: !disabled && onDeleteClick,\n    onDownloadClick: onDownloadClick,\n    onRowClick: onViewFileClick,\n    options: {\n      search: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(InputHidden, {\n    name: \"documents\",\n    onValueChange: setDocuments,\n    showError: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }));\n};\n\nDocumentation.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  formRef: PropTypes.any.isRequired\n};\nexport default Documentation;","map":{"version":3,"sources":["/home/rafael/Documentos/britania/COM-front/packages/web/src/modules/representative/containers/Documentation/Documentation.js"],"names":["React","useCallback","useMemo","useState","useDispatch","PropTypes","filter","map","Grid","useDialog","useT","RepresentativeActions","formatBackDateToFriendlyFormat","DataTable","InputHidden","CircularLoader","formFileModal","useStyles","Documentation","disabled","formRef","t","classes","createDialog","dispatch","documents","setDocuments","loading","setLoading","columns","title","howMany","field","sorting","render","row","file","created_at","onAddClick","id","Component","props","mode","onSave","values","current","setFieldValue","old","onEditClick","event","onEdit","item","tableData","onViewFileClick","onDeleteClick","deleteFileRepresentative","onDownloadClick","downloadFileRepresentative","path","filename","containerMain","gender","this","search","propTypes","bool","isRequired","any"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useMemo,\n  useState\n} from 'react'\nimport { useDispatch } from 'react-redux'\n\nimport PropTypes from 'prop-types'\n\nimport filter from 'lodash/filter'\nimport map from 'lodash/map'\n\nimport Grid from '@material-ui/core/Grid'\n\nimport { useDialog } from '@britania-crm/dialog'\nimport { useT } from '@britania-crm/i18n'\nimport { RepresentativeActions } from '@britania-crm/stores/representative'\nimport { formatBackDateToFriendlyFormat } from '@britania-crm/utils/date'\nimport DataTable from '@britania-crm/web-components/DataTable'\nimport InputHidden from '@britania-crm/web-components/InputHidden'\nimport { CircularLoader } from '@britania-crm/web-components/Loader'\n\nimport formFileModal from '../../modals/formFileModal/FormFileModal'\nimport useStyles from '../styles'\n\nconst Documentation = ({ disabled, formRef }) => {\n  const t = useT()\n  const classes = useStyles()\n  const { createDialog } = useDialog()\n  const dispatch = useCallback(useDispatch(), [])\n\n  const [documents, setDocuments] = useState([])\n  const [loading, setLoading] = useState(false)\n\n  const columns = useMemo(() => [\n    {\n      title: t('name', { howMany: 1 }),\n      field: 'name',\n      sorting: false\n    },\n    {\n      title: t('observation', { howMany: 1 }),\n      field: 'observation',\n      sorting: false\n    },\n    {\n      title: t('date'),\n      field: 'created_at',\n      sorting: false,\n      render: (row) => formatBackDateToFriendlyFormat(row.file?.created_at || row.created_at)\n    }\n  ], [t])\n\n  const onAddClick = useCallback(\n    () => {\n      createDialog({\n        id: 'createFileModal',\n        Component: formFileModal,\n        props: {\n          mode: 'create',\n          onSave (values) {\n            formRef.current.setFieldValue('documents', (old) => [...old, values])\n          }\n        }\n      })\n    }, [createDialog, formRef])\n\n  const onEditClick = useCallback(\n    (event, row) => {\n      createDialog({\n        id: 'editFileModal',\n        Component: formFileModal,\n        props: {\n          row,\n          mode: 'edit',\n          onEdit (values) {\n            formRef.current.setFieldValue('documents', (old) =>\n              map(old, (item) => {\n                if (item.tableData?.id === row?.tableData?.id) {\n                  return {\n                    ...values,\n                    id: row.id\n                  }\n                }\n                return item\n              })\n            )\n          }\n        }\n      })\n    }, [createDialog, formRef])\n\n  const onViewFileClick = useCallback(\n    (event, row) => {\n      createDialog({\n        id: 'viewFileModal',\n        Component: formFileModal,\n        props: { row, mode: 'view' }\n      })\n    }, [createDialog])\n\n  const onDeleteClick = useCallback(\n    (event, row) => {\n      dispatch(RepresentativeActions.deleteFileRepresentative(\n        row.id,\n        () => formRef.current.setFieldValue('documents', (old) => filter(old, ({ tableData }) => tableData?.id !== row?.tableData?.id))\n      ))\n    },\n    [dispatch, formRef]\n  )\n\n  const onDownloadClick = useCallback(\n    (event, row) => {\n      setLoading(true)\n      dispatch(RepresentativeActions.downloadFileRepresentative(row?.file?.path, row?.file?.filename, setLoading))\n    },\n    [dispatch]\n  )\n\n  return (\n    <Grid container spacing={ 1 } className={ classes.containerMain } >\n      {loading && <Grid container justify=\"center\"><CircularLoader /></Grid> }\n      <DataTable\n        data={ documents }\n        columns={ columns }\n        addTitle={ t('add new {this}', { gender: 'male', this: t('archive', { howMany: 1 }) }) }\n        onAddClick={ !disabled && onAddClick }\n        onEditClick={ !disabled && onEditClick }\n        onDeleteClick={ !disabled && onDeleteClick }\n        onDownloadClick={ onDownloadClick }\n        onRowClick={ onViewFileClick }\n        options={ { search: false } }\n      />\n      <InputHidden name=\"documents\" onValueChange={ setDocuments } showError/>\n    </Grid>\n  )\n}\n\nDocumentation.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  formRef: PropTypes.any.isRequired\n}\n\nexport default Documentation\n"]},"metadata":{},"sourceType":"module"}