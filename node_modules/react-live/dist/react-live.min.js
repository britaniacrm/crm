!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("prop-types"),require("react-simple-code-editor"),require("prism-react-renderer"),require("buble"),require("core-js/features/object/assign")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-simple-code-editor","prism-react-renderer","buble","core-js/features/object/assign"],t):t(e.ReactLive={},e.React,e.propTypes,e.Editor,e.Prism,e.Buble,e.assign)}(this,function(e,t,n,r,o,i,a){"use strict";function l(e){function n(e){var t={code:u?u(e):e,scope:c,transpileOptions:s},n=function(e){return v({error:e.toString(),element:void 0})},r=function(e){return v({error:void 0,element:e})};try{f?(v({error:void 0,element:null}),k(t,r,n)):r(x(t,n))}catch(e){n(e)}}var r=e.children,o=e.code,i=e.language,a=e.theme,l=e.disabled,c=e.scope,u=e.transformCode,s=e.transpileOptions,p=e.noInline,f=void 0!==p&&p,y=t.useState({error:void 0,element:void 0}),m=y[0],v=y[1];t.useEffect(function(){n(o)},[o,c,f,u,s]);var h=function(e){return n(e)},b=function(e){return v({error:e.toString()})};return d.createElement(O.Provider,{value:g({},m,{code:o,language:i,theme:a,disabled:l,onError:b,onChange:h})},r)}function c(e){var n=t.useContext(O),r=n.code,o=n.language,i=n.theme,a=n.disabled,l=n.onChange;return d.createElement(E,g({theme:i,code:r,language:o,disabled:a,onChange:l},e))}function u(e){var n=t.useContext(O).error;return n?d.createElement("pre",e,n):null}function s(e){var n=e.Component,r=b(e,["Component"]),o=t.useContext(O).element;return d.createElement(n,r,o?d.createElement(o,null):null)}function p(e){return function(t){function n(){return v(this,n),C(this,t.apply(this,arguments))}return h(n,t),n.prototype.render=function(){var t=this;return d.createElement(O.Consumer,null,function(n){return d.createElement(e,g({live:n},t.props))})},n}(t.Component)}var d="default"in t?t.default:t;n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var f="default"in o?o.default:o;a=a&&a.hasOwnProperty("default")?a.default:a;var y={plain:{color:"#C5C8C6",backgroundColor:"#1D1F21"},styles:[{types:["prolog","comment","doctype","cdata"],style:{color:"hsl(30, 20%, 50%)"}},{types:["property","tag","boolean","number","constant","symbol"],style:{color:"hsl(350, 40%, 70%)"}},{types:["attr-name","string","char","builtin","insterted"],style:{color:"hsl(75, 70%, 60%)"}},{types:["operator","entity","url","string","variable","language-css"],style:{color:"hsl(40, 90%, 60%)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["regex","important"],style:{color:"#e90"}},{types:["atrule","attr-value","keyword"],style:{color:"hsl(350, 40%, 70%)"}},{types:["punctuation","symbol"],style:{opacity:"0.7"}}]},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},C=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},E=function(e){var n=t.useState({code:e.code||""}),i=n[0],a=n[1];t.useEffect(function(){i.prevCodeProp&&e.code!==i.prevCodeProp&&a({code:e.code,prevCodeProp:e.code})},[e.code]);var l=function(e){a({code:e})};t.useEffect(function(){e.onChange&&e.onChange(i.code)},[i.code]);var c=function(n){return d.createElement(f,{Prism:o.Prism,code:n,theme:e.theme||y,language:e.language},function(e){var n=e.tokens,r=e.getLineProps,o=e.getTokenProps;return d.createElement(t.Fragment,null,n.map(function(e,t){return d.createElement("div",r({line:e,key:t}),e.map(function(e,t){return d.createElement("span",o({token:e,key:t}))}))}))})},u=e.style,s=e.theme,p=(e.onChange,b(e,["style","theme","onChange"])),v=i.code,h=s&&"object"===m(s.plain)?s.plain:{};return d.createElement(r,g({value:v,padding:10,highlight:c,onValueChange:l,style:g({whiteSpace:"pre",fontFamily:"monospace"},h,u)},p))},O=t.createContext({}),P={assign:a},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g({},t,{objectAssign:"_poly.assign",transforms:g({dangerousForOf:!0,dangerousTaggedTemplateString:!0},t.transforms)});return i.transform(e,n).code},j=function(e,n){return function(t){function r(){return v(this,r),C(this,t.apply(this,arguments))}return h(r,t),r.prototype.componentDidCatch=function(e){n(e)},r.prototype.render=function(){return"function"==typeof e?d.createElement(e,null):e},r}(t.Component)},S=function(e,t){var n=Object.keys(t),r=n.map(function(e){return t[e]});return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],n,[e])))).apply(void 0,[P,d].concat(r))},x=function(e,t){var n=e.code,r=void 0===n?"":n,o=e.scope,i=void 0===o?{}:o,a=e.transpileOptions,l=r.trim().replace(/;$/,""),c=w("return ("+l+")",a).trim();return j(S(c,i),t)},k=function(e,t,n){var r=e.code,o=void 0===r?"":r,i=e.scope,a=void 0===i?{}:i,l=e.transpileOptions,c=function(e){void 0===e?n(new SyntaxError("`render` must be called with valid JSX.")):t(j(e,n))};if(!/render\s*\(/.test(o))return n(new SyntaxError("No-Inline evaluations must call `render`."));S(w(o,l),g({},a,{render:c}))};l.defaultProps={code:"",noInline:!1,language:"jsx",disabled:!1},s.defaultProps={Component:"div"},e.Editor=E,e.LiveProvider=l,e.LiveEditor=c,e.LiveError=u,e.LivePreview=s,e.LiveContext=O,e.withLive=p,e.generateElement=x,e.renderElementAsync=k,Object.defineProperty(e,"__esModule",{value:!0})});
