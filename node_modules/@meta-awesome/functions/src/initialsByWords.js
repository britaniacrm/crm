import flow from 'lodash/fp/flow';
import deburr from 'lodash/fp/deburr';
import words from 'lodash/fp/words';
import mapFP from 'lodash/fp/map';
import first from 'lodash/first';
import last from 'lodash/last';
import toUpperCase from 'lodash/toUpper';

/**
 * Convert a string name to a two letter upper cased string
 * @param {String}  name
 * @return {String}
 *
 * @example
 * import initialsByWords from '@meta-awesome/functions/src/initialsByWords'
 *
 * initialsByWords('meta awesome');
 * // MA
 * */
const initialsByWords = name => {
  const str = flow(
    deburr,
    words,
    mapFP(s => s.charAt(0))
  )(name);

  const firstLetter = first(str);

  let lastLetter = null;
  if (str.length > 1) {
    lastLetter = last(str);
  }

  return toUpperCase([firstLetter, lastLetter].join(''));
};

export default initialsByWords;
