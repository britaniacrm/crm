"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var cls_hooked_1 = require("cls-hooked");
var ctx = cls_hooked_1.createNamespace("express-ctx");
function middleware(req, res, next) {
    ctx.bindEmitter(req);
    ctx.bindEmitter(res);
    ctx.run(function () { return next(); });
}
exports.middleware = middleware;
function setValue(key, value) {
    ctx.set(key, value);
}
exports.setValue = setValue;
function getValue(key) {
    if (ctx && ctx.active) {
        return ctx.get(key);
    }
}
exports.getValue = getValue;
